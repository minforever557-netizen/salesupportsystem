<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Sale Support | Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="assets/css/main.css">

<style>
/* ===== Login Page Only ===== */
.login-wrapper{
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:linear-gradient(135deg,var(--green),var(--orange));
}

.login-card{
  width:100%;
  max-width:420px;
  background:white;
  padding:30px;
  border-radius:24px;
  box-shadow:0 15px 40px rgba(0,0,0,.2);
  animation:fadeIn .6s ease;
}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(20px)}
  to{opacity:1;transform:none}
}

.login-card h2{
  text-align:center;
  margin-top:0;
}

.field{
  position:relative;
}

.field .eye{
  position:absolute;
  right:14px;
  top:38%;
  cursor:pointer;
  user-select:none;
}

.error{
  background:#ffebee;
  color:#c62828;
  padding:10px;
  border-radius:12px;
  margin-bottom:14px;
  display:none;
  animation:shake .4s;
}

@keyframes shake{
  0%{transform:translateX(0)}
  25%{transform:translateX(-6px)}
  50%{transform:translateX(6px)}
  75%{transform:translateX(-6px)}
  100%{transform:translateX(0)}
}

.loading{
  opacity:.6;
  pointer-events:none;
}
.links{
  text-align:center;
  margin-top:16px;
}
.links a{
  text-decoration:none;
  font-size:14px;
}
</style>
</head>

<body>

<div class="login-wrapper">
  <div class="login-card" id="card">

    <h2>üîê Sale Support</h2>

    <div id="errorBox" class="error"></div>

    <input id="email" type="email" placeholder="Email">

    <div class="field">
      <input id="password" type="password" placeholder="Password">
      <span class="eye" onclick="togglePassword()">üëÅÔ∏è</span>
    </div>

    <button onclick="login()">Login</button>

    <div class="links">
      <a href="register.html">Create Account</a> |
      <a href="reset.html">Reset Password</a>
    </div>

  </div>
</div>

<!-- Firebase -->
<script type="module">
import { auth } from "./assets/js/firebase.js";
import { signInWithEmailAndPassword } from
"https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const errorBox = document.getElementById("errorBox");
const card = document.getElementById("card");

// Toggle password
window.togglePassword = function(){
  const pwd = document.getElementById("password");
  pwd.type = pwd.type === "password" ? "text" : "password";
}

// Login
window.login = async function(){
  const email = email.value;
  const password = document.getElementById("password").value;

  errorBox.style.display="none";

  if(!email || !password){
    showError("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å Email ‡πÅ‡∏•‡∏∞ Password");
    return;
  }

  card.classList.add("loading");

  try{
    await signInWithEmailAndPassword(auth,email,password);
    window.location.href="home.html";
  }catch(err){
    showError("Email ‡∏´‡∏£‡∏∑‡∏≠ Password ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
  }

  card.classList.remove("loading");
}

function showError(msg){
  errorBox.innerText = msg;
  errorBox.style.display="block";
}
</script>

</body>
</html>
